<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><title>A Reduction Theorem for Store Buffers - Archive of Formal Proofs</title><meta name="description" content="When verifying a concurrent program, it is usual to assume that memory
is sequentially consistent.  However, most modern multiprocessors
depend on store..."><meta property="og:title" content="A Reduction Theorem for Store Buffers" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/entries/Store_Buffer_Reduction.html" /><meta property="og:image" content="/images/afp.png"/><meta property="article:section" content="entries" />
<meta property="article:published_time" content="2019-01-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-01-07T00:00:00+00:00" /><meta property="og:site_name" content="Archive of Formal Proofs" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/images/afp.png"/>

<meta name="twitter:title" content="A Reduction Theorem for Store Buffers"/>
<meta name="twitter:description" content=""/>

  
  <link rel="stylesheet" type="text/css" href="../css/front.min.css">

  <link rel="icon" href="../images/favicon.ico" type="image/icon">
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        processEscapes: true,
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script id="MathJax-script" async src="../js/mathjax/es5/tex-mml-chtml.js"></script>
  <script src="../js/entries.js"></script><script src="../js/obfuscate.js"></script>
  <script src="../js/flexsearch.bundle.js"></script>
  <script src="../js/scroll-spy.js"></script>
  <script src="../js/theory.js"></script>
  <script src="../js/util.js"></script><script src="../js/header-search.js"></script><script src="../js/search-autocomplete.js"></script>
</head>


<body class='mathjax_ignore '>
  <aside>
    <div id="menu-toggle">
  <input id="toggle" type="checkbox" />
  <label for="toggle">
    <span>menu</span>
    <img src="../images/menu.svg" alt="Menu" />
  </label>

  <a href="../" class='logo-link'>
    <img src="../images/afp.png" alt='Logo of the Archive of Formal Proofs' class="logo">
  </a>

  <a href="../search"><img src="../images/search.svg" alt="Search" /></a>
  <nav id="menu">
    <div>
      <a href="../" class='logo-link'>
        <img src="../images/afp.png" alt='Logo of the Archive of Formal Proofs' class="logo">
      </a>
      <ul>
        <a href="../"><li >Home</li></a>
        <a href="../topics/"><li >Topics</li></a>
        <a href="../download/"><li >Download</li></a>
        <a href="../help/"><li >Help</li></a>
        <a href="../submission/"><li >Submission</li></a>
        <a href="../statistics/"><li >Statistics</li></a>
        <a href="../about/"><li >About</li></a>
      </ul>
    </div>
  </nav>
</div>
  </aside>

  <div
    class='content  entries'><header>
  <form autocomplete="off" action="../search">
    <div class='form-container'>
      <input id="search-input" type="search" size="31" maxlength="255" value="" aria-label="Search the AFP" list="autocomplete"><button
      id="search-button" type="button"><img src="../images/search.svg" alt="Search" /></button>
      <datalist id="autocomplete">
      </datalist>
    </div>
  </form>
  <h1 >
    <span class='first'>A</span> <span class='first'>R</span>eduction <span class='first'>T</span>heorem for <span class='first'>S</span>tore <span class='first'>B</span>uffers</h1>
  <div>
    
    <p><a href="../authors/cohen">Ernie Cohen</a> <a class="obfuscated" data="eyJob3N0IjpbImFtYXpvbiIsImNvbSJdLCJ1c2VyIjpbImVjb2hlbiJdfQ==">ðŸ“§</a> and <a href="../authors/schirmer">Norbert Schirmer</a> <a class="obfuscated" data="eyJob3N0IjpbIndlYiIsImRlIl0sInVzZXIiOlsibm9yYmVydCIsInNjaGlybWVyIl19">ðŸ“§</a>
    </p>
    
    
    <p class="date">January 7, 2019</p>
    
  </div>
</header><div><main><h3>Abstract</h3>

  <div class="abstract mathjax_process">When verifying a concurrent program, it is usual to assume that memory
is sequentially consistent.  However, most modern multiprocessors
depend on store buffering for efficiency, and provide native
sequential consistency only at a substantial performance penalty.  To
regain sequential consistency, a programmer has to follow an
appropriate programming discipline. However, na&iuml;ve disciplines,
such as protecting all shared accesses with locks, are not flexible
enough for building high-performance multiprocessor software.  We
present a new discipline for concurrent programming under TSO (total
store order, with store buffer forwarding). It does not depend on
concurrency primitives, such as locks. Instead, threads use ghost
operations to acquire and release ownership of memory addresses. A
thread can write to an address only if no other thread owns it, and
can read from an address only if it owns it or it is shared and the
thread has flushed its store buffer since it last wrote to an address
it did not own. This discipline covers both coarse-grained concurrency
(where data is protected by locks) as well as fine-grained concurrency
(where atomic operations race to memory).  We formalize this
discipline in Isabelle/HOL, and prove that if every execution of a
program in a system without store buffers follows the discipline, then
every execution of the program with store buffers is sequentially
consistent. Thus, we can show sequential consistency under TSO by
ordinary assertional reasoning about the program, without having to
consider store buffers at all.</div>

  <h3>License</h3>
  <div><a href="https://isa-afp.org/LICENSE">BSD License</a></div><h3>Topics</h3>
  <ul><li><a href="../topics/computer-science/concurrency">Computer science/Concurrency</a></li></ul>
  <h3>Session Store_Buffer_Reduction</h3>
  <ul>
    <li><a href="../theories/store_buffer_reduction/#ReduceStoreBuffer">ReduceStoreBuffer</a></li>
    <li><a href="../theories/store_buffer_reduction/#ReduceStoreBufferSimulation">ReduceStoreBufferSimulation</a></li>
    <li><a href="../theories/store_buffer_reduction/#PIMP">PIMP</a></li>
    <li><a href="../theories/store_buffer_reduction/#SyntaxTweaks">SyntaxTweaks</a></li>
    <li><a href="../theories/store_buffer_reduction/#Abbrevs">Abbrevs</a></li>
    <li><a href="../theories/store_buffer_reduction/#Variants">Variants</a></li>
    <li><a href="../theories/store_buffer_reduction/#Text">Text</a></li>
    <li><a href="../theories/store_buffer_reduction/#Preliminaries">Preliminaries</a></li></ul><div class="flex-wrap">
  
  
  </div>
</main>

<nav class='links'>
  <a class='popup-button' href="#cite-popup">Cite</a>
  <a class='popup-button' href="#download-popup">Download</a>
  <h4>PDFs</h4>
  <a href="https://www.isa-afp.org/browser_info/current/AFP/Store_Buffer_Reduction/outline.pdf">Proof
    outline</a>
  <a href="https://www.isa-afp.org/browser_info/current/AFP/Store_Buffer_Reduction/document.pdf">Proof
    document</a>
  <a href="https://www.isa-afp.org/browser_info/current/AFP/Store_Buffer_Reduction/session_graph.pdf">Dependencies</a></nav>

<div id="cite-popup" class="overlay">
  <a class="cancel" href="#"></a>
  <div class="popup">
    <h2>Cite</h2>
    <a class="close" href="#">&times;</a>
    <div>
      <p style="display:none;" id="bibtex-filename">Store_Buffer_Reduction-AFP</p><pre id="copy-text">@article{Store_Buffer_Reduction-AFP,
  author  = {Ernie Cohen and Norbert Schirmer},
  title   = {A Reduction Theorem for Store Buffers},
  journal = {Archive of Formal Proofs},
  month   = {January},
  year    = {2019},
  note    = {\url{https://isa-afp.org/entries/Store_Buffer_Reduction.html},
            Formal proof development},
  ISSN    = {2150-914x},
}</pre>
      <button id="copy-bibtex">Copy</button> <a id="download-bibtex">Download</a>
    </div>
  </div>
</div>

<div id="download-popup" class="overlay">
  <a class="cancel" href="#"></a>
  <div class="popup">
    <h2>Download</h2>
    <a class="close" href="#">&times;</a>
    <a href="https://www.isa-afp.org/release//afp-Store_Buffer_Reduction-current.tar.gz" download>Download latest</a>
    <p>Older releases:</p>
    <ul><li>
        <a href="https://www.isa-afp.org/release/afp-Store_Buffer_Reduction-2021-12-14.tar.gz">Dec 14, 2021</a>: Isabelle2021
      </li><li>
        <a href="https://www.isa-afp.org/release/afp-Store_Buffer_Reduction-2021-02-23.tar.gz">Feb 23, 2021</a>: Isabelle2021
      </li><li>
        <a href="https://www.isa-afp.org/release/afp-Store_Buffer_Reduction-2020-04-20.tar.gz">Apr 20, 2020</a>: Isabelle2020
      </li><li>
        <a href="https://www.isa-afp.org/release/afp-Store_Buffer_Reduction-2019-06-11.tar.gz">Jun 11, 2019</a>: Isabelle2019
      </li><li>
        <a href="https://www.isa-afp.org/release/afp-Store_Buffer_Reduction-2019-01-11.tar.gz">Jan 11, 2019</a>: Isabelle2018
      </li></ul>
  </div>
</div>
    </div>
  </div>
</body>

</html>