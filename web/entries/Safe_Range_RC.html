<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Making Arbitrary Relational Calculus Queries Safe-Range - Archive of Formal Proofs</title>
    <meta name="description" content="The relational calculus (RC), i.e., first-order logic with equality but without function symbols, is a concise, declarative database query language. In...">

  <meta property="og:title" content="Making Arbitrary Relational Calculus Queries Safe-Range" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/entries/Safe_Range_RC.html" /><meta property="og:image" content="/images/afp.png"/><meta property="article:section" content="entries" />
<meta property="article:published_time" content="2022-09-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-28T00:00:00+00:00" /><meta property="og:site_name" content="Archive of Formal Proofs" />

  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/images/afp.png"/>

<meta name="twitter:title" content="Making Arbitrary Relational Calculus Queries Safe-Range"/>
<meta name="twitter:description" content=""/>

  <link rel="stylesheet" type="text/css" href="../css/front.min.css">

  <link rel="icon" href="../images/favicon.ico" type="image/icon">
    
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        processEscapes: true,
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script id="MathJax-script" async src="../js/mathjax/es5/tex-mml-chtml.js">
    </script>
    <script src="../js/entries.js"></script>

  <script src="../js/obfuscate.js"></script>
  <script src="../js/flexsearch.bundle.js"></script>
  <script src="../js/scroll-spy.js"></script>
  <script src="../js/theory.js"></script>
  <script src="../js/util.js"></script>
    <script src="../js/header-search.js"></script>
  <script src="../js/search-autocomplete.js"></script>
</head>

  <body class='mathjax_ignore'>
    <aside>
        <div id="menu-toggle">
  <input id="toggle" type="checkbox" />
  <label for="toggle">
    <span>menu</span>
    <img src="../images/menu.svg" alt="Menu" />
  </label>

  <a href="../" class="logo-link">
    <img src="../images/afp.png" alt="Logo of the Archive of Formal Proofs"
         class="logo">
  </a>

  <nav id="menu">
    <div>
      <a href="../" class='logo-link'>
        <img src="../images/afp.png" alt="Logo of the Archive of Formal Proofs"
             class="logo">
      </a>
      <ul>
          <a href="../">
            <li >
              Home
            </li>
          </a>
          <a href="../topics/">
            <li >
              Topics
            </li>
          </a>
          <a href="../download/">
            <li >
              Download
            </li>
          </a>
          <a href="../help/">
            <li >
              Help
            </li>
          </a>
          <a href="../submission/">
            <li >
              Submission
            </li>
          </a>
          <a href="../statistics/">
            <li >
              Statistics
            </li>
          </a>
          <a href="../about/">
            <li >
              About
            </li>
          </a>
      </ul>
    </div>
  </nav>
</div>
    </aside>
    <div class='content entries'>
      <header>
    <form autocomplete="off" action="../search">
      <div class='form-container'>
        <input id="search-input" type="search" size="31" maxlength="255" value=""
               aria-label="Search the AFP" list="autocomplete"><button
               id="search-button" type="button">
          <img src="../images/search.svg" alt="Search"/>
        </button>
        <datalist id="autocomplete">
        </datalist>
      </div>
    </form>
  <h1>
    <span class='first'>M</span>aking <span class='first'>A</span>rbitrary <span class='first'>R</span>elational <span class='first'>C</span>alculus <span class='first'>Q</span>ueries <span class='first'>S</span>afe-<span class='first'>R</span>ange
    
  </h1>
  <div>
      <p>
        <a href="../authors/raszyk">Martin Raszyk</a> <a class="obfuscated" data="eyJob3N0IjpbImluZiIsImV0aHoiLCJjaCJdLCJ1c2VyIjpbIm1hcnRpbiIsInJhc3p5ayJdfQ==">üìß</a> and <a href="../authors/traytel">Dmitriy Traytel</a> <a href="https://traytel.bitbucket.io/">üåê</a>

      </p>
      <p class="date">September 28, 2022</p>
  </div>
</header>
      <div>
        
  <main>
    <h3>Abstract</h3>

    <div class="abstract mathjax_process">The relational calculus (RC), i.e., first-order logic with equality
but without function symbols, is a concise, declarative database query
language. In contrast to relational algebra or SQL, which are the
traditional query languages of choice in the database community, RC
queries can evaluate to an infinite relation. Moreover, even in cases
where the evaluation result of an RC query would be finite it is not
clear how to efficiently compute it. Safe-range RC is an interesting
syntactic subclass of RC, because all safe-range queries evaluate to a
finite result and it is <a
href="http://webdam.inria.fr/Alice/pdfs/Chapter-5.pdf">well-known</a>
how to evaluate such queries by translating them to relational
algebra. We formalize and prove correct <a
href="https://doi.org/10.4230/LIPIcs.ICDT.2022.11">our
recent translation</a> of an arbitrary RC query into a pair of
safe-range queries. Assuming an infinite domain, the two queries have
the following meaning: The first is closed and characterizes the
original query's relative safety, i.e., whether given a fixed
database (interpretation of atomic predicates with finite relations),
the original query evaluates to a finite relation. The second
safe-range query is equivalent to the original query, if the latter is
relatively safe.  The formalization uses the Refinement Framework to
go from the non-deterministic algorithm described in the paper to a
deterministic, executable query translation. Our executable query
translation is a first step towards a verified tool that efficiently
evaluates arbitrary RC queries. This very problem is also solved by
the AFP entry <a
href="https://isa-afp.org/entries/Eval_FO.html">Eval_FO</a>
with a theoretically incomparable but practically worse time
complexity. (The latter is demonstrated by <a
href="https://doi.org/10.4230/LIPIcs.ICDT.2022.11">our
empirical evaluation</a>.)</div>

    <h3>License</h3>
    <div>
        <a href="https://isa-afp.org/LICENSE">BSD License</a>
    </div>
      <h3>Topics</h3>
      <ul>
          <li><a href="../topics/computer-science/data-management-systems">Computer science/Data management systems</a></li>
          <li><a href="../topics/logic/general-logic/classical-first-order-logic">Logic/General logic/Classical first-order logic</a></li>
      </ul>
      <h3>Session Safe_Range_RC</h3>
      <ul>
          <li><a href="../sessions/safe_range_rc/#Preliminaries">Preliminaries</a></li>
          <li><a href="../sessions/safe_range_rc/#Relational_Calculus">Relational_Calculus</a></li>
          <li><a href="../sessions/safe_range_rc/#Restrict_Bounds">Restrict_Bounds</a></li>
          <li><a href="../sessions/safe_range_rc/#Restrict_Bounds_Impl">Restrict_Bounds_Impl</a></li>
          <li><a href="../sessions/safe_range_rc/#Restrict_Frees">Restrict_Frees</a></li>
          <li><a href="../sessions/safe_range_rc/#Restrict_Frees_Impl">Restrict_Frees_Impl</a></li>
          <li><a href="../sessions/safe_range_rc/#Examples">Examples</a></li>
          <li><a href="../sessions/safe_range_rc/#Results">Results</a></li>
      </ul>

    <div class="flex-wrap">
      <div>
        <h3>Depends on</h3>
        <ul class="horizontal-list">
              <li><a href="../entries/Collections.html">Collections Framework</a></li>
              <li><a href="../entries/Deriving.html">Deriving class instances for datatypes</a></li>
              <li><a href="../entries/List-Index.html">List Index</a></li>
        </ul>
      </div>
      </div>
    
  </main>

  <nav class='links'>
    <a class='popup-button' href="#cite-popup">Cite</a>
    <a class='popup-button' href="#download-popup">Download</a>
    <h4>PDFs</h4>
    <a href="https://www.isa-afp.org/browser_info/current/AFP/Safe_Range_RC/outline.pdf">Proof outline</a>
    <a href="https://www.isa-afp.org/browser_info/current/AFP/Safe_Range_RC/document.pdf">Proof document</a>
    <a href="https://www.isa-afp.org/browser_info/current/AFP/Safe_Range_RC/session_graph.pdf">Dependencies</a>
  </nav>

  <div id="cite-popup" class="overlay">
    <a class="cancel" href="#"></a>
    <div class="popup">
      <h2>Cite</h2>
      <a class="close" href="#">&times;</a>
      <div>
        <p style="display:none;" id="bibtex-filename">Safe_Range_RC-AFP</p>
        <pre id="copy-text">@article{Safe_Range_RC-AFP,
  author  = {Martin Raszyk and Dmitriy Traytel},
  title   = {Making Arbitrary Relational Calculus Queries Safe-Range},
  journal = {Archive of Formal Proofs},
  month   = {September},
  year    = {2022},
  note    = {\url{https://isa-afp.org/entries/Safe_Range_RC.html},
             Formal proof development},
  ISSN    = {2150-914x},
}</pre>
        <button id="copy-bibtex">Copy</button> <a id="download-bibtex">Download</a>
      </div>
    </div>
  </div>

  <div id="download-popup" class="overlay">
    <a class="cancel" href="#"></a>
    <div class="popup">
      <h2>Download</h2>
      <a class="close" href="#">&times;</a>
      <a href="https://www.isa-afp.org/release/afp-Safe_Range_RC-current.tar.gz"
         download>Download latest</a>
        <p>Older releases:</p>
        <ul>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Safe_Range_RC-2024-05-26.tar.gz">
                May 26, 2024
              </a>
              : Isabelle2024
            </li>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Safe_Range_RC-2023-09-13.tar.gz">
                Sep 13, 2023
              </a>
              : Isabelle2023
            </li>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Safe_Range_RC-2022-10-27.tar.gz">
                Oct 27, 2022
              </a>
              : Isabelle2022
            </li>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Safe_Range_RC-2022-09-29.tar.gz">
                Sep 29, 2022
              </a>
              : Isabelle2021-1
            </li>
        </ul>
    </div>
  </div>
        
      </div>
    </div>
  </body>
</html>