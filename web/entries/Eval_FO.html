<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>First-Order Query Evaluation - Archive of Formal Proofs</title>
    <meta name="description" content="We formalize first-order query evaluation over an infinite domain with equality. We first define the syntax and semantics of first-order logic with...">

  <meta property="og:title" content="First-Order Query Evaluation" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/entries/Eval_FO.html" /><meta property="og:image" content="/images/afp.png"/><meta property="article:section" content="entries" />
<meta property="article:published_time" content="2022-02-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-15T00:00:00+00:00" /><meta property="og:site_name" content="Archive of Formal Proofs" />

  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/images/afp.png"/>

<meta name="twitter:title" content="First-Order Query Evaluation"/>
<meta name="twitter:description" content=""/>

  <link rel="stylesheet" type="text/css" href="../css/front.min.css">

  <link rel="icon" href="../images/favicon.ico" type="image/icon">
    
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        processEscapes: true,
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script id="MathJax-script" async src="../js/mathjax/es5/tex-mml-chtml.js">
    </script>
    <script src="../js/entries.js"></script>

  <script src="../js/obfuscate.js"></script>
  <script src="../js/flexsearch.bundle.js"></script>
  <script src="../js/scroll-spy.js"></script>
  <script src="../js/theory.js"></script>
  <script src="../js/util.js"></script>
    <script src="../js/header-search.js"></script>
  <script src="../js/search-autocomplete.js"></script>
</head>

  <body class='mathjax_ignore'>
    <aside>
        <div id="menu-toggle">
  <input id="toggle" type="checkbox" />
  <label for="toggle">
    <span>menu</span>
    <img src="../images/menu.svg" alt="Menu" />
  </label>

  <a href="../" class="logo-link">
    <img src="../images/afp.png" alt="Logo of the Archive of Formal Proofs"
         class="logo">
  </a>

  <nav id="menu">
    <div>
      <a href="../" class='logo-link'>
        <img src="../images/afp.png" alt="Logo of the Archive of Formal Proofs"
             class="logo">
      </a>
      <ul>
          <a href="../">
            <li >
              Home
            </li>
          </a>
          <a href="../topics/">
            <li >
              Topics
            </li>
          </a>
          <a href="../download/">
            <li >
              Download
            </li>
          </a>
          <a href="../help/">
            <li >
              Help
            </li>
          </a>
          <a href="../submission/">
            <li >
              Submission
            </li>
          </a>
          <a href="../statistics/">
            <li >
              Statistics
            </li>
          </a>
          <a href="../about/">
            <li >
              About
            </li>
          </a>
      </ul>
    </div>
  </nav>
</div>
    </aside>
    <div class='content entries'>
      <header>
    <form autocomplete="off" action="../search">
      <div class='form-container'>
        <input id="search-input" type="search" size="31" maxlength="255" value=""
               aria-label="Search the AFP" list="autocomplete"><button
               id="search-button" type="button">
          <img src="../images/search.svg" alt="Search"/>
        </button>
        <datalist id="autocomplete">
        </datalist>
      </div>
    </form>
  <h1>
    <span class='first'>F</span>irst-<span class='first'>O</span>rder <span class='first'>Q</span>uery <span class='first'>E</span>valuation
    
  </h1>
  <div>
      <p>
        <a href="../authors/raszyk">Martin Raszyk</a> <a class="obfuscated" data="eyJob3N0IjpbImluZiIsImV0aHoiLCJjaCJdLCJ1c2VyIjpbIm1hcnRpbiIsInJhc3p5ayJdfQ==">ðŸ“§</a>

      </p>
      <p class="date">February 15, 2022</p>
  </div>
</header>
      <div>
        
  <main>
    <h3>Abstract</h3>

    <div class="abstract mathjax_process">We formalize first-order query evaluation over an infinite domain with
equality. We first define the syntax and semantics of first-order
logic with equality. Next we define a locale
<i>eval&lowbar;fo</i> abstracting a representation of
a potentially infinite set of tuples satisfying a first-order query
over finite relations. Inside the locale, we define a function
<i>eval</i> checking if the set of tuples satisfying a
first-order query over a database (an interpretation of the
query's predicates) is finite (i.e., deciding <i>relative
safety</i>) and computing the set of satisfying tuples if it is
finite. Altogether the function <i>eval</i> solves
<i>capturability</i> (Avron and Hirshfeld, 1991) of
first-order logic with equality. We also use the function
<i>eval</i> to prove a code equation for the semantics of
first-order logic, i.e., the function checking if a first-order query
over a database is satisfied by a variable assignment.<br/> We provide an
interpretation of the locale <i>eval&lowbar;fo</i>
based on the approach by Ailamazyan et al. A core notion in the
interpretation is the active domain of a query and a database that
contains all domain elements that occur in the database or interpret
the query's constants. We prove the main theorem of Ailamazyan et
al. relating the satisfaction of a first-order query over an infinite
domain to the satisfaction of this query over a finite domain
consisting of the active domain and a few additional domain elements
(outside the active domain) whose number only depends on the query. In
our interpretation of the locale
<i>eval&lowbar;fo</i>, we use a potentially higher
number of the additional domain elements, but their number still only
depends on the query and thus has no effect on the data complexity
(Vardi, 1982) of query evaluation. Our interpretation yields an
<i>executable</i> function <i>eval</i>. The
time complexity of <i>eval</i> on a query is linear in the
total number of tuples in the intermediate relations for the
subqueries. Specifically, we build a database index to evaluate a
conjunction. We also optimize the case of a negated subquery in a
conjunction. Finally, we export code for the infinite domain of
natural numbers.</div>

    <h3>License</h3>
    <div>
        <a href="https://isa-afp.org/LICENSE">BSD License</a>
    </div>
      <h3>Topics</h3>
      <ul>
          <li><a href="../topics/computer-science/data-management-systems">Computer science/Data management systems</a></li>
          <li><a href="../topics/logic/general-logic/classical-first-order-logic">Logic/General logic/Classical first-order logic</a></li>
      </ul>
      <h3>Session Eval_FO</h3>
      <ul>
          <li><a href="../sessions/eval_fo/#Infinite">Infinite</a></li>
          <li><a href="../sessions/eval_fo/#FO">FO</a></li>
          <li><a href="../sessions/eval_fo/#Eval_FO">Eval_FO</a></li>
          <li><a href="../sessions/eval_fo/#Mapping_Code">Mapping_Code</a></li>
          <li><a href="../sessions/eval_fo/#Cluster">Cluster</a></li>
          <li><a href="../sessions/eval_fo/#Ailamazyan">Ailamazyan</a></li>
          <li><a href="../sessions/eval_fo/#Ailamazyan_Code">Ailamazyan_Code</a></li>
      </ul>

    <div class="flex-wrap">
      <div>
        <h3>Depends on</h3>
        <ul class="horizontal-list">
              <li><a href="../entries/Containers.html">Light-weight Containers</a></li>
        </ul>
      </div>
      </div>
    
  </main>

  <nav class='links'>
    <a class='popup-button' href="#cite-popup">Cite</a>
    <a class='popup-button' href="#download-popup">Download</a>
    <h4>PDFs</h4>
    <a href="https://www.isa-afp.org/browser_info/current/AFP/Eval_FO/outline.pdf">Proof outline</a>
    <a href="https://www.isa-afp.org/browser_info/current/AFP/Eval_FO/document.pdf">Proof document</a>
    <a href="https://www.isa-afp.org/browser_info/current/AFP/Eval_FO/session_graph.pdf">Dependencies</a>
  </nav>

  <div id="cite-popup" class="overlay">
    <a class="cancel" href="#"></a>
    <div class="popup">
      <h2>Cite</h2>
      <a class="close" href="#">&times;</a>
      <div>
        <p style="display:none;" id="bibtex-filename">Eval_FO-AFP</p>
        <pre id="copy-text">@article{Eval_FO-AFP,
  author  = {Martin Raszyk},
  title   = {First-Order Query Evaluation},
  journal = {Archive of Formal Proofs},
  month   = {February},
  year    = {2022},
  note    = {\url{https://isa-afp.org/entries/Eval_FO.html},
             Formal proof development},
  ISSN    = {2150-914x},
}</pre>
        <button id="copy-bibtex">Copy</button> <a id="download-bibtex">Download</a>
      </div>
    </div>
  </div>

  <div id="download-popup" class="overlay">
    <a class="cancel" href="#"></a>
    <div class="popup">
      <h2>Download</h2>
      <a class="close" href="#">&times;</a>
      <a href="https://www.isa-afp.org/release/afp-Eval_FO-current.tar.gz"
         download>Download latest</a>
        <p>Older releases:</p>
        <ul>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Eval_FO-2023-09-13.tar.gz">
                Sep 13, 2023
              </a>
              : Isabelle2023
            </li>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Eval_FO-2022-10-27.tar.gz">
                Oct 27, 2022
              </a>
              : Isabelle2022
            </li>
            <li>
              <a href="https://www.isa-afp.org/release/afp-Eval_FO-2022-02-21.tar.gz">
                Feb 21, 2022
              </a>
              : Isabelle2021-1
            </li>
        </ul>
    </div>
  </div>
        
      </div>
    </div>
  </body>
</html>