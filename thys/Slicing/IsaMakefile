
## configurables

SESSION_NAME = Slicing
BASE_NAME = Jinja

# time limit (in sec)
MAXTIME = 5400


## targets

default: $(SESSION_NAME)
images: images
test: images

all: images


## global settings

BASE_IMAGE=$(ISABELLE_OUTPUT)/$(BASE_NAME)
SESSION_IMAGE=$(ISABELLE_OUTPUT)/$(SESSION_NAME)
SESSION_LOG=$(ISABELLE_OUTPUT)/log/$(SESSION_NAME).gz

USEDIR = $(ISABELLE_TOOL) usedir -v true -i true -V outline=/proof,/ML -d pdf -g true 


## dependencies


# test run and proof document

$(SESSION_NAME): $(BASE_NAME) $(SESSION_IMAGE)

$(BASE_NAME): $(BASE_IMAGE)
	cd ../Jinja; $(ISABELLE_TOOL) make Jinja

$(SESSION_IMAGE): $(BASE_IMAGE) ROOT.ML Slicing.thy \
  Basic/*.thy Dynamic/*.thy StaticIntra/*.thy While/*.thy JinjaVM/*.thy \
  document/root.tex
	ulimit -t $(MAXTIME); $(USEDIR) -b $(BASE_NAME) $(SESSION_NAME)


## clean

clean:
	@rm -f $(SESSION_IMAGE)
	@rm -f $(SESSION_LOG)
